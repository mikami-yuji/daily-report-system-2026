(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},46897,e=>{"use strict";let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],46897)},2473,e=>{"use strict";var s=e.i(43476),a=e.i(71645),l=e.i(78138),t=e.i(9165),r=e.i(55436),i=e.i(46897),c=e.i(87316),d=e.i(7486);function n(){let{selectedFile:e}=(0,l.useFile)(),[n,x]=(0,a.useState)([]),[m,o]=(0,a.useState)([]),[h,g]=(0,a.useState)(!0),[p,u]=(0,a.useState)(""),[j,b]=(0,a.useState)("all"),[f,N]=(0,a.useState)([]);(0,a.useEffect)(()=>{y()},[e]),(0,a.useEffect)(()=>{v()},[n,p,j]);let y=async()=>{if(e)try{g(!0);let s=(await (0,t.getReports)(e)).filter(e=>String(e.行動内容||"").includes("量販店調査"));x(s);let a=Array.from(new Set(s.map(e=>e.エリア).filter(e=>e&&""!==e))).sort();N(a)}catch(e){console.error("Failed to load reports:",e)}finally{g(!1)}},v=()=>{let e=[...n];if(p.trim()){let s=p.toLowerCase();e=e.filter(e=>[e.訪問先名,e.上長コメント,e.コメント返信欄,e.エリア,e.行動内容].join(" ").toLowerCase().includes(s))}"all"!==j&&(e=e.filter(e=>e.エリア===j)),e.sort((e,s)=>{let a=e.日付||"";return(s.日付||"").localeCompare(a)}),o(e)};return h?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen flex-col",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sf-light-blue mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-sf-text-weak",children:"データを読み込んでいます..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"量販店調査検索"}),(0,s.jsx)("p",{className:"text-gray-600",children:"量販店調査レポートの検索と閲覧"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワード検索"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(r.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>u(e.target.value),placeholder:"訪問先名、コメント等で検索...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sf-light-blue focus:border-sf-light-blue outline-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"エリア"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.MapPin,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,s.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sf-light-blue focus:border-sf-light-blue outline-none appearance-none bg-white",children:[(0,s.jsx)("option",{value:"all",children:"すべてのエリア"}),f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-semibold text-sf-light-blue",children:m.length})," 件の調査レポート"]})})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===m.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,s.jsx)(d.Building2,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,s.jsx)("p",{className:"text-gray-600",children:"該当する調査レポートがありません"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"検索条件を変更してください"})]}):m.map((e,a)=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.訪問先名||"訪問先不明"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c.Calendar,{size:14}),(0,s.jsx)("span",{children:e.日付})]}),e.エリア&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(i.MapPin,{size:14}),(0,s.jsx)("span",{children:e.エリア})]}),e.面談者&&(0,s.jsxs)("span",{className:"text-gray-500",children:["担当: ",e.面談者]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:"量販店調査"}),e.管理番号&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["No. ",e.管理番号]})]})]}),e.上長コメント&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"上長コメント"}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e.上長コメント})})]}),e.商談内容&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"商談内容"}),(0,s.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:(0,s.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e.商談内容})})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.ランク&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"ランク:"}),(0,s.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:e.ランク})]}),e.重点顧客&&"-"!==e.重点顧客&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"重点顧客:"}),(0,s.jsx)("span",{className:"ml-2 font-medium text-orange-600",children:e.重点顧客})]}),e.デザイン提案有無&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"デザイン提案:"}),(0,s.jsx)("span",{className:`ml-2 font-medium ${"あり"===e.デザイン提案有無?"text-purple-600":"text-gray-600"}`,children:e.デザイン提案有無})]}),e.デザイン進捗状況&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"進捗:"}),(0,s.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:e.デザイン進捗状況})]})]})]},a))})]})}e.s(["default",()=>n])}]);