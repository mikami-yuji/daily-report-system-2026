(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45759,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(9165),l=e.i(78138),a=e.i(75254);let n=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var i=e.i(47615),o=e.i(16715),d=e.i(78583);let c=(0,a.default)("layout-list",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]),x=(0,a.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var u=e.i(5766),h=e.i(81704),m=e.i(37727);let f=(0,a.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);function b({onClose:e,onSuccess:l,selectedFile:a}){let{isOnline:n,saveOfflineReport:i,cachedCustomers:o,cacheCustomers:d}=(0,h.useOffline)(),[c,x]=(0,t.useState)({æ—¥ä»˜:new Date().toISOString().split("T")[0].replace(/-/g,"/").slice(2),è¡Œå‹•å†…å®¹:"",ã‚¨ãƒªã‚¢:"",å¾—æ„å…ˆCD:"",ç›´é€å…ˆCD:"",è¨ªå•å…ˆå:"",ç›´é€å…ˆå:"",é¢è«‡è€…:"",æ»åœ¨æ™‚é–“:"",å•†è«‡å†…å®¹:"",ææ¡ˆç‰©:"",æ¬¡å›ãƒ—ãƒ©ãƒ³:"",ç«¶åˆä»–ç¤¾æƒ…å ±:"",é‡ç‚¹é¡§å®¢:"",ãƒ©ãƒ³ã‚¯:"",ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡:"",ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥:"",ãƒ‡ã‚¶ã‚¤ãƒ³å:"",ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³:"","ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No.":""}),[b,p]=(0,t.useState)(!1),[g,j]=(0,t.useState)([]),[v,N]=(0,t.useState)([]),[y,w]=(0,t.useState)(!1),[k,C]=(0,t.useState)([]),[S,z]=(0,t.useState)("none"),[D,M]=(0,t.useState)([]),[T,F]=(0,t.useState)(""),[$,E]=(0,t.useState)(""),q=[];for(let e=8;e<=23;e++)q.push(`${String(e).padStart(2,"0")}:00`),e<23&&q.push(`${String(e).padStart(2,"0")}:30`);(0,t.useEffect)(()=>{(0,r.getCustomers)(a).then(e=>{j(e),d(e)}).catch(e=>{console.error("Failed to fetch customers:",e),o.length>0&&(j(o),(0,u.default)("ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸå¾—æ„å…ˆãƒªã‚¹ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™",{icon:"ğŸ“¡",id:"cached-customers"}))})},[a,n,d,o]);let B=e=>{if(!e.trim()){N([]),w(!1);return}let s=e.toLowerCase(),t=s.replace(/[\u3041-\u3096]/g,e=>String.fromCharCode(e.charCodeAt(0)+96)),r=g.filter(e=>!!(e.å¾—æ„å…ˆå&&e.å¾—æ„å…ˆå.toLowerCase().includes(s)||e.å¾—æ„å…ˆCD&&String(e.å¾—æ„å…ˆCD).includes(s)||e.ãƒ•ãƒªã‚¬ãƒŠ&&e.ãƒ•ãƒªã‚¬ãƒŠ.toLowerCase().includes(t)||e.ç›´é€å…ˆå&&e.ç›´é€å…ˆå.toLowerCase().includes(s)||e.ç›´é€å…ˆCD&&String(e.ç›´é€å…ˆCD).includes(s))).slice(0,50);N(r),w(r.length>0)},R=e=>{x(s=>({...s,[e.target.name]:e.target.value}))},O=e=>{z(e),"none"===e?x(e=>({...e,ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡:"",ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥:"",ãƒ‡ã‚¶ã‚¤ãƒ³å:"",ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³:"","ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No.":""})):"new"===e?x(e=>({...e,ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡:"ã‚ã‚Š",ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥:"",ãƒ‡ã‚¶ã‚¤ãƒ³å:"",ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³:"æ–°è¦","ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No.":""})):"existing"===e&&x(e=>({...e,ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡:"ã‚ã‚Š",ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥:"",ãƒ‡ã‚¶ã‚¤ãƒ³å:"",ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³:"","ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No.":""}))},P=async e=>{e.preventDefault(),p(!0);try{if(!n){i(c,a),l();return}let e={...c};if("å¤–å‡ºæ™‚é–“"===c.è¡Œå‹•å†…å®¹){let s="";T&&$&&(s+=`ã€å¤–å‡ºæ™‚é–“ã€‘${T}ã€œ${$}
`),c.ãƒ©ãƒ³ã‚¯&&(s+=`ã€æº€è¶³åº¦ã€‘${c.ãƒ©ãƒ³ã‚¯}
`),e.å•†è«‡å†…å®¹=s+(c.å•†è«‡å†…å®¹||""),e.ãƒ©ãƒ³ã‚¯=""}let s=await fetch(`/api/reports?filename=${encodeURIComponent(a)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw console.error("Server error details:",e),Error(`Failed to create report: ${JSON.stringify(e)}`)}let t=await s.json();u.default.success(`æ—¥å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸ (No. ${t.management_number})`,{duration:3e3}),l()}catch(e){console.error("Error creating report:",e),u.default.error(`ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ: ${e.message}`)}finally{p(!1)}},L=["ç¤¾å†…ï¼ˆï¼‘æ—¥ï¼‰","ç¤¾å†…ï¼ˆåŠæ—¥ï¼‰","é‡è²©åº—èª¿æŸ»","å¤–å‡ºæ™‚é–“"].includes(c.è¡Œå‹•å†…å®¹),A="å¤–å‡ºæ™‚é–“"===c.è¡Œå‹•å†…å®¹;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b border-sf-border p-4 flex justify-between items-center z-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-sf-text",children:"æ–°è¦æ—¥å ±ä½œæˆ"}),(0,s.jsx)("button",{onClick:e,className:"text-sf-text-weak hover:text-sf-text",children:(0,s.jsx)(m.X,{size:24})})]}),(0,s.jsxs)("form",{onSubmit:P,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æ—¥ä»˜ *"}),(0,s.jsx)("input",{type:"text",name:"æ—¥ä»˜",value:c.æ—¥ä»˜,onChange:R,placeholder:"YY/MM/DD",required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"è¡Œå‹•å†…å®¹ *"}),(0,s.jsxs)("select",{name:"è¡Œå‹•å†…å®¹",value:c.è¡Œå‹•å†…å®¹,onChange:R,required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"-",children:"-"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆã‚¢ãƒã‚ã‚Šï¼‰",children:"è¨ªå•ï¼ˆã‚¢ãƒã‚ã‚Šï¼‰"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆã‚¢ãƒãªã—ï¼‰",children:"è¨ªå•ï¼ˆã‚¢ãƒãªã—ï¼‰"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆæ–°è¦ï¼‰",children:"è¨ªå•ï¼ˆæ–°è¦ï¼‰"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆã‚¯ãƒ¬ãƒ¼ãƒ ï¼‰",children:"è¨ªå•ï¼ˆã‚¯ãƒ¬ãƒ¼ãƒ ï¼‰"}),(0,s.jsx)("option",{value:"é›»è©±å•†è«‡",children:"é›»è©±å•†è«‡"}),(0,s.jsx)("option",{value:"é›»è©±ã‚¢ãƒå–ã‚Š",children:"é›»è©±ã‚¢ãƒå–ã‚Š"}),(0,s.jsx)("option",{value:"ãƒ¡ãƒ¼ãƒ«å•†è«‡",children:"ãƒ¡ãƒ¼ãƒ«å•†è«‡"}),(0,s.jsx)("option",{value:"é‡è²©åº—èª¿æŸ»",children:"é‡è²©åº—èª¿æŸ»"}),(0,s.jsx)("option",{value:"ç¤¾å†…ï¼ˆåŠæ—¥ï¼‰",children:"ç¤¾å†…ï¼ˆåŠæ—¥ï¼‰"}),(0,s.jsx)("option",{value:"ç¤¾å†…ï¼ˆï¼‘æ—¥ï¼‰",children:"ç¤¾å†…ï¼ˆï¼‘æ—¥ï¼‰"}),(0,s.jsx)("option",{value:"å¤–å‡ºæ™‚é–“",children:"å¤–å‡ºæ™‚é–“"}),(0,s.jsx)("option",{value:"ãã®ä»–",children:"ãã®ä»–"})]})]}),A&&(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded border border-sf-border",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"å‡ºç™ºæ™‚é–“ *"}),(0,s.jsxs)("select",{value:T,onChange:e=>{F(e.target.value),$&&e.target.value>=$&&E("")},required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),q.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"å¸°ç¤¾æ™‚é–“ *"}),(0,s.jsxs)("select",{value:$,onChange:e=>E(e.target.value),required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),q.filter(e=>!T||e>T).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),!L&&(0,s.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"è¨ªå•å…ˆåï¼ˆå¾—æ„å…ˆåï¼‰ *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",name:"è¨ªå•å…ˆå",value:c.è¨ªå•å…ˆå,onChange:e=>{let s=e.target.value;x(e=>({...e,è¨ªå•å…ˆå:s})),B(s)},required:!L,autoComplete:"off",className:"w-full pl-3 pr-10 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"}),c.è¨ªå•å…ˆå&&(0,s.jsx)("button",{type:"button",onClick:()=>{x(e=>({...e,è¨ªå•å…ˆå:""})),B("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",title:"ã‚¯ãƒªã‚¢",children:(0,s.jsx)(m.X,{size:16})})]}),c.ç›´é€å…ˆå&&(0,s.jsxs)("div",{className:"mt-1 text-sm text-sf-light-blue flex items-center gap-1",children:[(0,s.jsx)(f,{size:12}),"ç›´é€å…ˆ: ",c.ç›´é€å…ˆå," (CD: ",c.ç›´é€å…ˆCD,")"]}),y&&(0,s.jsx)("ul",{className:"absolute z-20 w-full bg-white border border-sf-border rounded mt-1 max-h-60 overflow-y-auto shadow-lg",children:v.map((e,t)=>(0,s.jsxs)("li",{className:"px-3 py-2 hover:bg-sf-bg-light cursor-pointer",onClick:()=>{x(s=>({...s,è¨ªå•å…ˆå:e.ç›´é€å…ˆå?`${e.å¾—æ„å…ˆå}ã€€${e.ç›´é€å…ˆå}`:e.å¾—æ„å…ˆå||"",ç›´é€å…ˆå:e.ç›´é€å…ˆå||"",å¾—æ„å…ˆCD:e.å¾—æ„å…ˆCD||"",ç›´é€å…ˆCD:e.ç›´é€å…ˆCD||"",ã‚¨ãƒªã‚¢:e.ã‚¨ãƒªã‚¢||"",é‡ç‚¹é¡§å®¢:e.é‡ç‚¹é¡§å®¢||"",ãƒ©ãƒ³ã‚¯:e.ãƒ©ãƒ³ã‚¯||""})),w(!1),e.å¾—æ„å…ˆCD&&((0,r.getInterviewers)(e.å¾—æ„å…ˆCD,a,e.å¾—æ„å…ˆå,e.ç›´é€å…ˆå).then(e=>{C(e)}).catch(e=>{console.error("Failed to fetch interviewers:",e),C([])}),(0,r.getDesigns)(e.å¾—æ„å…ˆCD,a).then(e=>{M(e)}).catch(e=>{console.error("Failed to fetch designs:",e),M([])}))},children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.å¾—æ„å…ˆå,e.ç›´é€å…ˆå&&(0,s.jsxs)("span",{className:"text-sm font-normal ml-2 text-sf-text-weak",children:["(ç›´é€å…ˆ: ",e.ç›´é€å…ˆå,")"]})]}),(0,s.jsxs)("div",{className:"text-xs text-sf-text-weak",children:[e.å¾—æ„å…ˆCD," - ",e.ã‚¨ãƒªã‚¢]})]},t))})]}),!L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"é¢è«‡è€…"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",name:"é¢è«‡è€…",value:c.é¢è«‡è€…,onChange:R,list:"interviewer-suggestions",className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"}),(0,s.jsx)("datalist",{id:"interviewer-suggestions",children:k.map((e,t)=>(0,s.jsx)("option",{value:e},t))})]})]}),!L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æ»åœ¨æ™‚é–“"}),(0,s.jsxs)("select",{name:"æ»åœ¨æ™‚é–“",value:c.æ»åœ¨æ™‚é–“,onChange:R,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"-",children:"-"}),(0,s.jsx)("option",{value:"10åˆ†æœªæº€",children:"10åˆ†æœªæº€"}),(0,s.jsx)("option",{value:"30åˆ†æœªæº€",children:"30åˆ†æœªæº€"}),(0,s.jsx)("option",{value:"60åˆ†æœªæº€",children:"60åˆ†æœªæº€"}),(0,s.jsx)("option",{value:"60åˆ†ä»¥ä¸Š",children:"60åˆ†ä»¥ä¸Š"})]})]}),A&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æº€è¶³åº¦ï¼ˆé”æˆç‡ï¼‰"}),(0,s.jsxs)("select",{name:"ãƒ©ãƒ³ã‚¯",value:c.ãƒ©ãƒ³ã‚¯,onChange:R,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"25%",children:"25%"}),(0,s.jsx)("option",{value:"50%",children:"50%"}),(0,s.jsx)("option",{value:"75%",children:"75%"}),(0,s.jsx)("option",{value:"100%",children:"100%"})]})]})]}),!L&&(0,s.jsxs)("div",{className:"md:col-span-2 border-t border-sf-border pt-4 mt-2",children:[(0,s.jsx)("h3",{className:"font-medium text-sf-text mb-3",children:"ãƒ‡ã‚¶ã‚¤ãƒ³æƒ…å ±"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"designMode",value:"none",checked:"none"===S,onChange:()=>O("none"),className:"text-sf-light-blue focus:ring-sf-light-blue"}),(0,s.jsx)("span",{children:"ãªã—"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"designMode",value:"new",checked:"new"===S,onChange:()=>O("new"),className:"text-sf-light-blue focus:ring-sf-light-blue"}),(0,s.jsx)("span",{children:"æ–°è¦"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"designMode",value:"existing",checked:"existing"===S,onChange:()=>O("existing"),className:"text-sf-light-blue focus:ring-sf-light-blue"}),(0,s.jsx)("span",{children:"æ—¢å­˜"})]})]}),"existing"===S&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"éå»ã®ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆä»¶"}),(0,s.jsxs)("select",{onChange:e=>{let s=e.target.value,t=D.find(e=>String(e.ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No)===s);t&&x(e=>({...e,"ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No.":String(t.ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No),ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥:t.ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥,ãƒ‡ã‚¶ã‚¤ãƒ³å:t.ãƒ‡ã‚¶ã‚¤ãƒ³å,ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³:t.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³}))},value:c["ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."],className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),D.map(e=>(0,s.jsxs)("option",{value:String(e.ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No),children:[e.ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No," - ",e.ãƒ‡ã‚¶ã‚¤ãƒ³å," (",e.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³,")"]},String(e.ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No)))]})]}),("new"===S||"existing"===S)&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."}),(0,s.jsx)("input",{type:"text",name:"ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No.",value:c["ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."],onChange:R,readOnly:"existing"===S,className:`w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue ${"existing"===S?"bg-gray-100":""}`})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥"}),(0,s.jsxs)("select",{name:"ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥",value:c.ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥,onChange:R,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"-",children:"-"}),(0,s.jsx)("option",{value:"åˆ¥æ³¨ï¼ˆæ–°ç‰ˆï¼‰",children:"åˆ¥æ³¨ï¼ˆæ–°ç‰ˆï¼‰"}),(0,s.jsx)("option",{value:"åˆ¥æ³¨ï¼ˆæ”¹ç‰ˆï¼‰",children:"åˆ¥æ³¨ï¼ˆæ”¹ç‰ˆï¼‰"}),(0,s.jsx)("option",{value:"åˆ¥æ³¨ï¼ˆå†ç‰ˆï¼‰",children:"åˆ¥æ³¨ï¼ˆå†ç‰ˆï¼‰"}),(0,s.jsx)("option",{value:"SPï¼ˆæ–°ç‰ˆï¼‰",children:"SPï¼ˆæ–°ç‰ˆï¼‰"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ãƒ‡ã‚¶ã‚¤ãƒ³å"}),(0,s.jsx)("input",{type:"text",name:"ãƒ‡ã‚¶ã‚¤ãƒ³å",value:c.ãƒ‡ã‚¶ã‚¤ãƒ³å,onChange:R,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³"}),(0,s.jsxs)("select",{name:"ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³",value:c.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³,onChange:R,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"-",children:"-"}),(0,s.jsx)("option",{value:"æ–°è¦",children:"æ–°è¦"}),(0,s.jsx)("option",{value:"50ï¼…æœªæº€",children:"50ï¼…æœªæº€"}),(0,s.jsx)("option",{value:"80ï¼…æœªæº€",children:"80ï¼…æœªæº€"}),(0,s.jsx)("option",{value:"80ï¼…ä»¥ä¸Š",children:"80ï¼…ä»¥ä¸Š"}),(0,s.jsx)("option",{value:"å‡ºç¨¿",children:"å‡ºç¨¿"}),(0,s.jsx)("option",{value:"ä¸æ¡ç”¨ï¼ˆã‚³ãƒ³ãƒšè² ã‘ï¼‰",children:"ä¸æ¡ç”¨ï¼ˆã‚³ãƒ³ãƒšè² ã‘ï¼‰"}),(0,s.jsx)("option",{value:"ä¸æ¡ç”¨ï¼ˆä¼ç”»å€’ã‚Œï¼‰",children:"ä¸æ¡ç”¨ï¼ˆä¼ç”»å€’ã‚Œï¼‰"}),(0,s.jsx)("option",{value:"ä¿ç•™",children:"ä¿ç•™"})]})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"å•†è«‡å†…å®¹"}),(0,s.jsx)("textarea",{name:"å•†è«‡å†…å®¹",value:c.å•†è«‡å†…å®¹,onChange:R,rows:4,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=8,onBlur:e=>e.currentTarget.rows=4})]}),!L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ææ¡ˆç‰©"}),(0,s.jsx)("textarea",{name:"ææ¡ˆç‰©",value:c.ææ¡ˆç‰©,onChange:R,rows:1,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=6,onBlur:e=>e.currentTarget.rows=1})]}),!L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æ¬¡å›ãƒ—ãƒ©ãƒ³"}),(0,s.jsx)("textarea",{name:"æ¬¡å›ãƒ—ãƒ©ãƒ³",value:c.æ¬¡å›ãƒ—ãƒ©ãƒ³,onChange:R,rows:1,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=6,onBlur:e=>e.currentTarget.rows=1})]}),!L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ç«¶åˆä»–ç¤¾æƒ…å ±"}),(0,s.jsx)("textarea",{name:"ç«¶åˆä»–ç¤¾æƒ…å ±",value:c.ç«¶åˆä»–ç¤¾æƒ…å ±,onChange:R,rows:1,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=4,onBlur:e=>e.currentTarget.rows=1})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-sf-border",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 border border-sf-border rounded text-sf-text hover:bg-gray-50",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-sf-light-blue text-white rounded hover:bg-blue-700 disabled:opacity-50",children:b?"ä½œæˆä¸­...":"ä½œæˆ"})]})]})]})})}let p=e=>{let s={};for(let t in e)null===e[t]||void 0===e[t]?s[t]="":s[t]=e[t];return s};function g(e){return e?String(e).replace(/_x000D_/g,"\n").replace(/\r/g,""):""}function j({report:e,onClose:l,onSuccess:a,selectedFile:n,setReports:i,reports:o}){let{isOnline:d,saveOfflineReport:c,cacheReports:x}=(0,h.useOffline)(),f="å¤–å‡ºæ™‚é–“"===e.è¡Œå‹•å†…å®¹&&e.å•†è«‡å†…å®¹?(e=>{if(!e)return{start:"",end:"",content:"",satisfaction:""};let s=e,t="",r="",l="",a=s.match(/^ã€å¤–å‡ºæ™‚é–“ã€‘(\d{2}:\d{2})ã€œ(\d{2}:\d{2})\n/);a&&(t=a[1],r=a[2],s=s.replace(a[0],""));let n=s.match(/^ã€æº€è¶³åº¦ã€‘(.*)\n/);return n&&(l=n[1],s=s.replace(n[0],"")),{start:t,end:r,content:s,satisfaction:l}})(e.å•†è«‡å†…å®¹):{start:"",end:"",content:e.å•†è«‡å†…å®¹||"",satisfaction:""},[b,g]=(0,t.useState)({æ—¥ä»˜:e.æ—¥ä»˜||"",è¡Œå‹•å†…å®¹:e.è¡Œå‹•å†…å®¹||"",ã‚¨ãƒªã‚¢:e.ã‚¨ãƒªã‚¢||"",å¾—æ„å…ˆCD:e.å¾—æ„å…ˆCD||"",ç›´é€å…ˆCD:e.ç›´é€å…ˆCD||"",è¨ªå•å…ˆå:e.è¨ªå•å…ˆå||"",ç›´é€å…ˆå:e.ç›´é€å…ˆå||"",é¢è«‡è€…:e.é¢è«‡è€…||"",æ»åœ¨æ™‚é–“:e.æ»åœ¨æ™‚é–“||"",å•†è«‡å†…å®¹:f.content,ææ¡ˆç‰©:e.ææ¡ˆç‰©||"",æ¬¡å›ãƒ—ãƒ©ãƒ³:e.æ¬¡å›ãƒ—ãƒ©ãƒ³||"",ç«¶åˆä»–ç¤¾æƒ…å ±:e.ç«¶åˆä»–ç¤¾æƒ…å ±||"",é‡ç‚¹é¡§å®¢:e.é‡ç‚¹é¡§å®¢||"",ãƒ©ãƒ³ã‚¯:f.satisfaction||e.ãƒ©ãƒ³ã‚¯||"",ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ:e.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ||"",ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„:e.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„||""}),[j,v]=(0,t.useState)(f.start),[N,y]=(0,t.useState)(f.end),w=[];for(let e=8;e<=23;e++)w.push(`${String(e).padStart(2,"0")}:00`),e<23&&w.push(`${String(e).padStart(2,"0")}:30`);let[k,C]=(0,t.useState)(!1),S=t.default.useMemo(()=>({ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ:e.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ,ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„:e.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„,å•†è«‡å†…å®¹:e.å•†è«‡å†…å®¹}),[e]),z=async s=>{s.preventDefault(),C(!0);let{ç®¡ç†ç•ªå·:t,...l}=e,h={...b};if("å¤–å‡ºæ™‚é–“"===b.è¡Œå‹•å†…å®¹){let e="";j&&N&&(e+=`ã€å¤–å‡ºæ™‚é–“ã€‘${j}ã€œ${N}
`),b.ãƒ©ãƒ³ã‚¯&&(e+=`ã€æº€è¶³åº¦ã€‘${b.ãƒ©ãƒ³ã‚¯}
`),h.å•†è«‡å†…å®¹=e+(b.å•†è«‡å†…å®¹||""),h.ãƒ©ãƒ³ã‚¯=""}let m=p({...l,...h,original_values:S});try{if(!d){c(m,n,"update",e.ç®¡ç†ç•ªå·);let s={...e,...m};i(t=>t.map(t=>t.ç®¡ç†ç•ªå·===e.ç®¡ç†ç•ªå·?s:t)),x(o.map(t=>t.ç®¡ç†ç•ªå·===e.ç®¡ç†ç•ªå·?s:t)),a();return}await (0,r.updateReport)(e.ç®¡ç†ç•ªå·,m,n),u.default.success(`æ—¥å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ (No. ${e.ç®¡ç†ç•ªå·})`),a()}catch(t){if(console.error("Error updating report:",t),t.response&&409===t.response.status){u.default.error(t.response.data.detail||"ä»–ã®æ–¹ãŒç·¨é›†ã—ã¾ã—ãŸã€‚æœ€æ–°ã®æƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚",{duration:6e3,style:{border:"1px solid #ef4444",padding:"16px",color:"#ef4444"},iconTheme:{primary:"#ef4444",secondary:"#FFFAEE"}}),C(!1);return}c(m,n,"update",e.ç®¡ç†ç•ªå·);let s={...e,...m};i(t=>t.map(t=>t.ç®¡ç†ç•ªå·===e.ç®¡ç†ç•ªå·?s:t)),x(o.map(t=>t.ç®¡ç†ç•ªå·===e.ç®¡ç†ç•ªå·?s:t)),i(t=>{let r=t.map(t=>t.ç®¡ç†ç•ªå·===e.ç®¡ç†ç•ªå·?s:t);return x(r),r}),u.default.success("ã‚µãƒ¼ãƒãƒ¼é€šä¿¡ã‚¨ãƒ©ãƒ¼ã€‚ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä¿å­˜ã—ã¾ã—ãŸã€‚",{duration:4e3,position:"top-right",icon:"ğŸ“¡"}),a()}finally{C(!1)}},D=e=>{g(s=>({...s,[e.target.name]:e.target.value}))},M=["ç¤¾å†…ï¼ˆï¼‘æ—¥ï¼‰","ç¤¾å†…ï¼ˆåŠæ—¥ï¼‰","é‡è²©åº—èª¿æŸ»","å¤–å‡ºæ™‚é–“"].includes(b.è¡Œå‹•å†…å®¹),T="å¤–å‡ºæ™‚é–“"===b.è¡Œå‹•å†…å®¹;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b border-sf-border p-4 flex justify-between items-center z-10",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-sf-text",children:["æ—¥å ±ç·¨é›† (No. ",e.ç®¡ç†ç•ªå·,")"]}),(0,s.jsx)("button",{onClick:l,className:"text-sf-text-weak hover:text-sf-text",children:(0,s.jsx)(m.X,{size:24})})]}),(0,s.jsxs)("form",{onSubmit:z,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æ—¥ä»˜ *"}),(0,s.jsx)("input",{type:"text",name:"æ—¥ä»˜",value:b.æ—¥ä»˜,onChange:D,placeholder:"YY/MM/DD",required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"è¡Œå‹•å†…å®¹ *"}),(0,s.jsxs)("select",{name:"è¡Œå‹•å†…å®¹",value:b.è¡Œå‹•å†…å®¹,onChange:D,required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"-",children:"-"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆã‚¢ãƒã‚ã‚Šï¼‰",children:"è¨ªå•ï¼ˆã‚¢ãƒã‚ã‚Šï¼‰"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆã‚¢ãƒãªã—ï¼‰",children:"è¨ªå•ï¼ˆã‚¢ãƒãªã—ï¼‰"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆæ–°è¦ï¼‰",children:"è¨ªå•ï¼ˆæ–°è¦ï¼‰"}),(0,s.jsx)("option",{value:"è¨ªå•ï¼ˆã‚¯ãƒ¬ãƒ¼ãƒ ï¼‰",children:"è¨ªå•ï¼ˆã‚¯ãƒ¬ãƒ¼ãƒ ï¼‰"}),(0,s.jsx)("option",{value:"é›»è©±å•†è«‡",children:"é›»è©±å•†è«‡"}),(0,s.jsx)("option",{value:"é›»è©±ã‚¢ãƒå–ã‚Š",children:"é›»è©±ã‚¢ãƒå–ã‚Š"}),(0,s.jsx)("option",{value:"ãƒ¡ãƒ¼ãƒ«å•†è«‡",children:"ãƒ¡ãƒ¼ãƒ«å•†è«‡"}),(0,s.jsx)("option",{value:"é‡è²©åº—èª¿æŸ»",children:"é‡è²©åº—èª¿æŸ»"}),(0,s.jsx)("option",{value:"ç¤¾å†…ï¼ˆåŠæ—¥ï¼‰",children:"ç¤¾å†…ï¼ˆåŠæ—¥ï¼‰"}),(0,s.jsx)("option",{value:"ç¤¾å†…ï¼ˆï¼‘æ—¥ï¼‰",children:"ç¤¾å†…ï¼ˆï¼‘æ—¥ï¼‰"}),(0,s.jsx)("option",{value:"å¤–å‡ºæ™‚é–“",children:"å¤–å‡ºæ™‚é–“"}),(0,s.jsx)("option",{value:"ãã®ä»–",children:"ãã®ä»–"})]})]}),T&&(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded border border-sf-border",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"å‡ºç™ºæ™‚é–“ *"}),(0,s.jsxs)("select",{value:j,onChange:e=>{v(e.target.value),N&&e.target.value>=N&&y("")},required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),w.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"å¸°ç¤¾æ™‚é–“ *"}),(0,s.jsxs)("select",{value:N,onChange:e=>y(e.target.value),required:!0,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),w.filter(e=>!j||e>j).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),!M&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"è¨ªå•å…ˆåï¼ˆå¾—æ„å…ˆåï¼‰ *"}),(0,s.jsx)("input",{type:"text",name:"è¨ªå•å…ˆå",value:b.è¨ªå•å…ˆå,onChange:D,required:!M,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"})]}),!M&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"é¢è«‡è€…"}),(0,s.jsx)("input",{type:"text",name:"é¢è«‡è€…",value:b.é¢è«‡è€…,onChange:D,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue"})]}),!M&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æ»åœ¨æ™‚é–“"}),(0,s.jsxs)("select",{name:"æ»åœ¨æ™‚é–“",value:b.æ»åœ¨æ™‚é–“,onChange:D,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"-",children:"-"}),(0,s.jsx)("option",{value:"10åˆ†æœªæº€",children:"10åˆ†æœªæº€"}),(0,s.jsx)("option",{value:"30åˆ†æœªæº€",children:"30åˆ†æœªæº€"}),(0,s.jsx)("option",{value:"60åˆ†æœªæº€",children:"60åˆ†æœªæº€"}),(0,s.jsx)("option",{value:"60åˆ†ä»¥ä¸Š",children:"60åˆ†ä»¥ä¸Š"})]})]}),T&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æº€è¶³åº¦ï¼ˆé”æˆç‡ï¼‰"}),(0,s.jsxs)("select",{name:"ãƒ©ãƒ³ã‚¯",value:b.ãƒ©ãƒ³ã‚¯,onChange:D,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue",children:[(0,s.jsx)("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),(0,s.jsx)("option",{value:"25%",children:"25%"}),(0,s.jsx)("option",{value:"50%",children:"50%"}),(0,s.jsx)("option",{value:"75%",children:"75%"}),(0,s.jsx)("option",{value:"100%",children:"100%"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"å•†è«‡å†…å®¹"}),(0,s.jsx)("textarea",{name:"å•†è«‡å†…å®¹",value:b.å•†è«‡å†…å®¹,onChange:D,rows:4,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=8,onBlur:e=>e.currentTarget.rows=4})]}),!M&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ææ¡ˆç‰©"}),(0,s.jsx)("textarea",{name:"ææ¡ˆç‰©",value:b.ææ¡ˆç‰©,onChange:D,rows:1,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=6,onBlur:e=>e.currentTarget.rows=1})]}),!M&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"æ¬¡å›ãƒ—ãƒ©ãƒ³"}),(0,s.jsx)("textarea",{name:"æ¬¡å›ãƒ—ãƒ©ãƒ³",value:b.æ¬¡å›ãƒ—ãƒ©ãƒ³,onChange:D,rows:1,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=6,onBlur:e=>e.currentTarget.rows=1})]}),!M&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1",children:"ç«¶åˆä»–ç¤¾æƒ…å ±"}),(0,s.jsx)("textarea",{name:"ç«¶åˆä»–ç¤¾æƒ…å ±",value:b.ç«¶åˆä»–ç¤¾æƒ…å ±,onChange:D,rows:1,className:"w-full px-3 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue transition-all duration-200 resize-none",onFocus:e=>e.currentTarget.rows=4,onBlur:e=>e.currentTarget.rows=1})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-sf-border",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1 text-blue-800",children:"ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ"}),(0,s.jsx)("textarea",{name:"ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ",value:b.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ,onChange:D,rows:4,className:"w-full px-3 py-2 border border-blue-200 bg-blue-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"ä¸Šé•·ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-sf-text mb-1 text-green-800",children:"ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„"}),(0,s.jsx)("textarea",{name:"ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„",value:b.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„,onChange:D,rows:4,className:"w-full px-3 py-2 border border-green-200 bg-green-50 rounded focus:outline-none focus:ring-2 focus:ring-green-400",placeholder:"ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®è¿”ä¿¡ã‚’å…¥åŠ›..."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-sf-border",children:[(0,s.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 border border-sf-border rounded text-sf-text hover:bg-gray-50",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),(0,s.jsx)("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-sf-light-blue text-white rounded hover:bg-blue-700 disabled:opacity-50",children:k?"æ›´æ–°ä¸­...":"æ›´æ–°"})]})]})]})})}var v=e.i(78894);function N({isOpen:e,onClose:t,onConfirm:r,title:l,message:a,confirmText:n="ç¢ºèª",cancelText:i="ã‚­ãƒ£ãƒ³ã‚»ãƒ«",isDangerous:o=!1}){return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:t,children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[o&&(0,s.jsx)("div",{className:"bg-red-100 p-2 rounded-full text-red-600",children:(0,s.jsx)(v.AlertTriangle,{size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:l}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 whitespace-pre-wrap",children:a})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:i}),(0,s.jsx)("button",{onClick:()=>{r(),t()},className:`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${o?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500"}`,children:n})]})]})}):null}let y=(0,a.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var w=e.i(73375),k=e.i(63059);let C=(0,a.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var S=e.i(87316);let z=(0,a.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var D=e.i(63727),M=e.i(84614),T=e.i(46897),F=e.i(47780);let $=(0,a.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function E({label:e,value:t}){return(0,s.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,s.jsxs)("span",{className:"text-xs text-sf-text-weak whitespace-nowrap",children:[e,":"]}),(0,s.jsx)("span",{className:"text-sm text-sf-text text-right flex-1",children:g(t)||"-"})]})}function q({report:e,onClose:a,onNext:n,onPrev:i,hasNext:o,hasPrev:d,onEdit:c,onUpdate:x}){let{selectedFile:h}=(0,l.useFile)(),[f,b]=(0,t.useState)({ä¸Šé•·:e.ä¸Šé•·||"",å±±æ¾„å¸¸å‹™:e.å±±æ¾„å¸¸å‹™||"",å²¡æœ¬å¸¸å‹™:e.å²¡æœ¬å¸¸å‹™||"",ä¸­é‡æ¬¡é•·:e.ä¸­é‡æ¬¡é•·||"",æ—¢èª­ãƒã‚§ãƒƒã‚¯:e.æ—¢èª­ãƒã‚§ãƒƒã‚¯||""}),[j,v]=(0,t.useState)({ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ:e.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ||"",ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„:e.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„||""}),[q,B]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=e=>{"ArrowLeft"===e.key&&o?n():"ArrowRight"===e.key&&d?i():"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,d,n,i,a]);let P=async s=>{let t="æ¸ˆ"===f[s]?"":"æ¸ˆ";b(e=>({...e,[s]:t})),B(!0);try{let{ç®¡ç†ç•ªå·:l,...a}=e,n={...a,...f,[s]:t,...j},i=p(n);await (0,r.updateReport)(e.ç®¡ç†ç•ªå·,i,h),x&&x()}catch(e){console.error("Failed to update approval:",e),b(e=>({...e,[s]:f[s]})),u.default.error("æ‰¿èªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{B(!1)}},L=async s=>{if(j[s]!==(e[s]||"")){B(!0);try{let{ç®¡ç†ç•ªå·:t,...l}=e,a={...l,...j,[s]:j[s],...f},n=p(a);await (0,r.updateReport)(e.ç®¡ç†ç•ªå·,n,h),u.default.success("ã‚³ãƒ¡ãƒ³ãƒˆã‚’ä¿å­˜ã—ã¾ã—ãŸ"),x&&x()}catch(e){console.error("Failed to update comment:",e),u.default.error("ã‚³ãƒ¡ãƒ³ãƒˆã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{B(!1)}}},A=async()=>{B(!0);try{await (0,r.deleteReport)(e.ç®¡ç†ç•ªå·,h),u.default.success("æ—¥å ±ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"),a(),x&&x()}catch(e){console.error("Failed to delete report:",e),u.default.error("æ—¥å ±ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{B(!1)}},I="ã‚ã‚Š"===e.ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡;return(0,s.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:a,children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-sf-border flex justify-between items-start bg-gray-50 rounded-t-lg",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-sf-text mb-2",children:[e.è¨ªå•å…ˆå,e.ç›´é€å…ˆå&&(0,s.jsxs)("span",{className:"text-base font-normal text-sf-text-weak ml-3",children:["(ç›´é€å…ˆ: ",e.ç›´é€å…ˆå,")"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-sm text-sf-text-weak",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(S.Calendar,{size:16}),e.æ—¥ä»˜]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(z,{size:16}),"No. ",e.ç®¡ç†ç•ªå·]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(D.Briefcase,{size:16}),e.è¡Œå‹•å†…å®¹]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(M.User,{size:16}),e.é¢è«‡è€…]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(T.MapPin,{size:16}),e.ã‚¨ãƒªã‚¢]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:c,className:"p-2 text-sf-text-weak hover:text-sf-light-blue hover:bg-white rounded-full transition-colors border border-transparent hover:border-sf-border",title:"ç·¨é›†",children:(0,s.jsx)(y,{size:20})}),(0,s.jsx)("button",{onClick:a,className:"p-2 text-sf-text-weak hover:text-sf-text hover:bg-white rounded-full transition-colors border border-transparent hover:border-sf-border",children:(0,s.jsx)(m.X,{size:24})})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[o&&(0,s.jsx)("button",{onClick:n,className:"fixed left-8 top-1/2 -translate-y-1/2 p-3 bg-white/80 hover:bg-white shadow-lg rounded-full text-sf-text-weak hover:text-sf-light-blue transition-all z-10 border border-sf-border backdrop-blur-sm",title:"å‰ã®æ—¥å ± (æ–°ã—ã„)",children:(0,s.jsx)(w.ChevronLeft,{size:32})}),d&&(0,s.jsx)("button",{onClick:i,className:"fixed right-8 top-1/2 -translate-y-1/2 p-3 bg-white/80 hover:bg-white shadow-lg rounded-full text-sf-text-weak hover:text-sf-light-blue transition-all z-10 border border-sf-border backdrop-blur-sm",title:"æ¬¡ã®æ—¥å ± (å¤ã„)",children:(0,s.jsx)(k.ChevronRight,{size:32})}),(0,s.jsxs)("div",{className:"space-y-8",children:[I&&(0,s.jsxs)("div",{className:"bg-blue-50 p-5 rounded-lg border border-blue-100",children:[(0,s.jsxs)("h3",{className:"font-bold text-blue-800 mb-4 flex items-center gap-2 text-lg",children:[(0,s.jsx)(F.Palette,{size:20})," ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆä»¶"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsx)(E,{label:"ç¨®åˆ¥",value:e.ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥}),(0,s.jsx)(E,{label:"æ¡ˆä»¶å",value:e.ãƒ‡ã‚¶ã‚¤ãƒ³å}),(0,s.jsx)(E,{label:"é€²æ—",value:e.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³}),(0,s.jsx)(E,{label:"ä¾é ¼No.",value:e["ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."]}),(0,s.jsx)(E,{label:"ç¢ºèªNo.",value:e["ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªç”¨ãƒ‡ã‚¶ã‚¤ãƒ³No."]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-xl text-sf-text mb-4 border-b-2 border-sf-border pb-2",children:"å•†è«‡ãƒ»ææ¡ˆå†…å®¹"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-sf-text-weak mb-2",children:"å•†è«‡å†…å®¹"}),(0,s.jsx)("div",{className:"text-base text-sf-text whitespace-pre-wrap leading-relaxed p-4 bg-gray-50 rounded border border-gray-100 min-h-[100px]",children:g(e.å•†è«‡å†…å®¹)||"ãªã—"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-sf-text-weak mb-2",children:"ææ¡ˆç‰©"}),(0,s.jsx)("div",{className:"text-base text-sf-text whitespace-pre-wrap p-3 bg-gray-50 rounded border border-gray-100",children:g(e.ææ¡ˆç‰©)||"ãªã—"})]}),(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-sf-text-weak mb-2",children:"æ¬¡å›ãƒ—ãƒ©ãƒ³"}),(0,s.jsx)("div",{className:"text-base text-sf-text whitespace-pre-wrap p-3 bg-gray-50 rounded border border-gray-100",children:g(e.æ¬¡å›ãƒ—ãƒ©ãƒ³)||"ãªã—"})]})]}),(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-sf-text-weak mb-2",children:"ç«¶åˆä»–ç¤¾æƒ…å ±"}),(0,s.jsx)("div",{className:"text-base text-sf-text whitespace-pre-wrap p-3 bg-gray-50 rounded border border-gray-100",children:g(e.ç«¶åˆä»–ç¤¾æƒ…å ±)||"ãªã—"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 bg-gray-50 p-5 rounded-lg h-fit",children:[(0,s.jsx)("h3",{className:"font-bold text-sf-text mb-4 border-b border-gray-200 pb-2",children:"æ‰¿èªãƒ»ç¢ºèª"}),(0,s.jsxs)("div",{className:"space-y-3",children:[["ä¸Šé•·","å±±æ¾„å¸¸å‹™","å²¡æœ¬å¸¸å‹™","ä¸­é‡æ¬¡é•·"].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:"æ¸ˆ"===f[e],onChange:()=>P(e),disabled:q,className:"w-4 h-4 text-sf-light-blue border-gray-300 rounded focus:ring-sf-light-blue cursor-pointer"}),(0,s.jsx)("span",{className:"text-sm text-sf-text",children:e})]},e)),(0,s.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:"æ¸ˆ"===f.æ—¢èª­ãƒã‚§ãƒƒã‚¯,onChange:()=>P("æ—¢èª­ãƒã‚§ãƒƒã‚¯"),disabled:q,className:"w-4 h-4 text-sf-light-blue border-gray-300 rounded focus:ring-sf-light-blue cursor-pointer"}),(0,s.jsx)("span",{className:"text-sm text-sf-text",children:"æ—¢èª­"})]})})]})]}),(0,s.jsx)("div",{className:"lg:col-span-3 space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-sf-text mb-4 border-b border-sf-border pb-2",children:"ã‚³ãƒ¡ãƒ³ãƒˆ"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-yellow-50 p-5 rounded-lg border border-yellow-100",children:[(0,s.jsxs)("div",{className:"text-sm font-bold text-yellow-800 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ"]}),(0,s.jsx)("textarea",{value:j.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ,onChange:e=>v(s=>({...s,ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ:e.target.value})),onBlur:()=>L("ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ"),disabled:q,className:"w-full min-h-[100px] p-3 text-sf-text bg-white border border-yellow-200 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 resize-y",placeholder:"ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›..."})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-5 rounded-lg border border-green-100",children:[(0,s.jsxs)("div",{className:"text-sm font-bold text-green-800 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„"]}),(0,s.jsx)("textarea",{value:j.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„,onChange:e=>v(s=>({...s,ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„:e.target.value})),onBlur:()=>L("ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„"),disabled:q,className:"w-full min-h-[100px] p-3 text-sf-text bg-white border border-green-200 rounded focus:outline-none focus:ring-2 focus:ring-green-400 resize-y",placeholder:"è¿”ä¿¡ã‚’å…¥åŠ›..."})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-sf-border pt-6 mt-8",children:[(0,s.jsxs)("button",{className:"text-xs text-gray-400 hover:text-gray-600 flex items-center gap-1 mb-2",onClick:e=>{let s=e.currentTarget.nextElementSibling;s&&s.classList.toggle("hidden")},children:[(0,s.jsx)($,{size:12}),"è©³ç´°å±æ€§æƒ…å ±ã‚’è¡¨ç¤º"]}),(0,s.jsxs)("div",{className:"hidden grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 text-xs text-gray-500 bg-gray-50 p-4 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"å¾—æ„å…ˆCD"}),e.å¾—æ„å…ˆCD]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"ç›´é€å…ˆCD"}),e.ç›´é€å…ˆCD]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"ç›´é€å…ˆå"}),e.ç›´é€å…ˆå]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"é‡ç‚¹é¡§å®¢"}),e.é‡ç‚¹é¡§å®¢]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"ãƒ©ãƒ³ã‚¯"}),e.ãƒ©ãƒ³ã‚¯]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"ç›®æ¨™"}),e.å¾—æ„å…ˆç›®æ¨™]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-gray-400",children:"æ»åœ¨æ™‚é–“"}),e.æ»åœ¨æ™‚é–“]})]})]})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-sf-border bg-gray-50 flex justify-between items-center rounded-b-lg",children:[(0,s.jsxs)("button",{onClick:n,disabled:!o,className:`flex items-center gap-2 px-4 py-2 rounded transition-colors ${o?"bg-white border border-sf-border hover:bg-sf-light-blue hover:text-white hover:border-transparent text-sf-text shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[(0,s.jsx)(w.ChevronLeft,{size:16}),"å‰ã®æ—¥å ±"]}),(0,s.jsxs)("button",{onClick:()=>{O(!0)},disabled:q,className:"flex items-center gap-2 px-4 py-2 rounded transition-colors bg-red-50 border border-red-200 hover:bg-red-500 hover:text-white hover:border-transparent text-red-600 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(C,{size:16}),"å‰Šé™¤"]}),(0,s.jsxs)("button",{onClick:i,disabled:!d,className:`flex items-center gap-2 px-4 py-2 rounded transition-colors ${d?"bg-white border border-sf-border hover:bg-sf-light-blue hover:text-white hover:border-transparent text-sf-text shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:["æ¬¡ã®æ—¥å ±",(0,s.jsx)(k.ChevronRight,{size:16})]})]})]}),(0,s.jsx)(N,{isOpen:R,onClose:()=>O(!1),onConfirm:A,title:"æ—¥å ±ã®å‰Šé™¤",message:"ã“ã®æ—¥å ±ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ\\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚",confirmText:"å‰Šé™¤ã™ã‚‹",isDangerous:!0})]})}function B(){let{files:e,selectedFile:a,setSelectedFile:m}=(0,l.useFile)(),{isOnline:f,cachedReports:p,cacheReports:v,offlineReports:N}=(0,h.useOffline)(),y=e=>{let s=[...e];return N.forEach(e=>{if("update"===e.type&&e.reportId){let t=s.findIndex(s=>s.ç®¡ç†ç•ªå·===e.reportId);-1!==t&&(s[t]={...s[t],...e.data})}else e.type}),s},[w,k]=(0,t.useState)([]),[C,S]=(0,t.useState)(!0),[z,D]=(0,t.useState)(null),[M,T]=(0,t.useState)("desc"),[F,$]=(0,t.useState)("table"),[E,B]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[P,L]=(0,t.useState)(null);(0,t.useEffect)(()=>{a&&A()},[a,f]);let A=()=>{S(!0),(0,r.getReports)(a).then(e=>{let s=I(e.filter(e=>e.æ—¥ä»˜&&""!==e.æ—¥ä»˜.trim()),M);k(y(s)),v(s),S(!1)}).catch(e=>{console.error(e),p.length>0&&(k(y(p)),(0,u.default)("ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸæ—¥å ±ã‚’è¡¨ç¤ºã—ã¾ã™",{icon:"ğŸ“¡",id:"cached-reports"})),S(!1)})},I=(e,s)=>[...e].sort((e,t)=>{let r=String(e.æ—¥ä»˜||""),l=String(t.æ—¥ä»˜||"");return"asc"===s?r.localeCompare(l):l.localeCompare(r)}),H=e=>{D(e)};return(0,s.jsxs)("div",{className:"space-y-4 h-[calc(100vh-8rem)] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center bg-white p-4 rounded border border-sf-border shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-sf-light-blue p-2 rounded text-white shadow-sm",children:(0,s.jsx)(d.FileText,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-sf-text-weak font-medium",children:"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"}),(0,s.jsx)("h1",{className:"text-xl font-bold text-sf-text",children:"å–¶æ¥­æ—¥å ±"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsxs)("div",{className:"flex bg-gray-100 p-1 rounded border border-sf-border",children:[(0,s.jsx)("button",{onClick:()=>$("table"),className:`p-1.5 rounded ${"table"===F?"bg-white shadow-sm text-sf-light-blue":"text-gray-400 hover:text-gray-600"}`,title:"ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º",children:(0,s.jsx)(x,{size:16})}),(0,s.jsx)("button",{onClick:()=>$("timeline"),className:`p-1.5 rounded ${"timeline"===F?"bg-white shadow-sm text-sf-light-blue":"text-gray-400 hover:text-gray-600"}`,title:"ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º",children:(0,s.jsx)(c,{size:16})})]}),(0,s.jsxs)("button",{onClick:()=>{let e="asc"===M?"desc":"asc";T(e),k(s=>I(s,e))},className:"p-2 border border-sf-border rounded hover:bg-gray-50 text-sf-text-weak transition-colors flex items-center gap-2",title:"asc"===M?"å¤ã„é †":"æ–°ã—ã„é †",children:[(0,s.jsx)(i.Filter,{size:16}),(0,s.jsx)("span",{className:"text-sm hidden md:inline",children:"asc"===M?"æ˜‡é †":"é™é †"})]}),(0,s.jsx)("button",{onClick:A,className:"p-2 border border-sf-border rounded hover:bg-gray-50 text-sf-text-weak transition-colors",children:(0,s.jsx)(o.RefreshCw,{size:16})}),(0,s.jsxs)("button",{onClick:()=>B(!0),className:"bg-sf-light-blue text-white px-4 py-2 rounded text-sm font-medium hover:bg-blue-700 shadow-sm flex items-center gap-1 transition-colors",children:[(0,s.jsx)(n,{size:16}),"æ–°è¦ä½œæˆ"]})]})]}),(0,s.jsx)("div",{className:"bg-white border border-sf-border shadow-sm flex-1 overflow-auto rounded",children:C?(0,s.jsx)("div",{className:"p-10 text-center text-sf-text-weak",children:"èª­ã¿è¾¼ã¿ä¸­..."}):0===w.length?(0,s.jsx)("div",{className:"p-10 text-center text-sf-text-weak",children:"æ—¥å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}):"table"===F?(0,s.jsx)("div",{className:"divide-y divide-sf-border",children:w.map((e,t)=>(0,s.jsx)("div",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>H(t),children:(0,s.jsx)("div",{className:"p-4 flex items-center gap-4",children:(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"ç®¡ç†ç•ªå·"}),(0,s.jsx)("p",{className:"font-medium text-sf-text",children:e.ç®¡ç†ç•ªå·})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"æ—¥ä»˜"}),(0,s.jsx)("p",{className:"text-sf-text",children:e.æ—¥ä»˜})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"è¨ªå•å…ˆå"}),(0,s.jsx)("p",{className:"font-medium text-sf-light-blue",children:e.è¨ªå•å…ˆå}),e.ç›´é€å…ˆå&&(0,s.jsxs)("p",{className:"text-xs text-sf-text-weak mt-1",children:["ç›´é€: ",e.ç›´é€å…ˆå]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"è¡Œå‹•å†…å®¹"}),(0,s.jsx)("p",{className:"text-sf-text",children:e.è¡Œå‹•å†…å®¹})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"é¢è«‡è€…"}),(0,s.jsx)("p",{className:"text-sf-text",children:e.é¢è«‡è€…})]})]})})},t))}):(0,s.jsx)("div",{className:"p-4 space-y-4",children:w.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white p-4 rounded border border-sf-border shadow-sm hover:shadow-md transition-shadow cursor-pointer hover:border-sf-light-blue",onClick:()=>H(t),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3 border-b border-gray-100 pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"font-bold text-sf-text",children:e.æ—¥ä»˜}),(0,s.jsx)("span",{className:"text-sm px-2 py-0.5 rounded bg-gray-100 text-sf-text-weak",children:e.è¡Œå‹•å†…å®¹}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-sf-light-blue",children:e.è¨ªå•å…ˆå}),e.ç›´é€å…ˆå&&(0,s.jsxs)("span",{className:"text-xs text-sf-text-weak",children:["ç›´é€: ",e.ç›´é€å…ˆå]})]})]}),(0,s.jsxs)("div",{className:"text-sm text-sf-text-weak",children:["é¢è«‡è€…: ",e.é¢è«‡è€…||"-"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(e.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³||e["ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."]||e.ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥||e.ãƒ‡ã‚¶ã‚¤ãƒ³å||e.ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡)&&(0,s.jsxs)("div",{className:"bg-purple-50 p-3 rounded border border-purple-100 space-y-2",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-purple-800 border-b border-purple-200 pb-1 mb-2",children:"ãƒ‡ã‚¶ã‚¤ãƒ³æƒ…å ±"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[e.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"é€²æ—:"})," ",(0,s.jsx)("span",{className:"font-medium text-sf-text",children:e.ãƒ‡ã‚¶ã‚¤ãƒ³é€²æ—çŠ¶æ³})]}),e["ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."]&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"No:"})," ",(0,s.jsx)("span",{className:"font-medium text-sf-text",children:e["ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼No."]})]}),e.ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"ç¨®åˆ¥:"})," ",(0,s.jsx)("span",{className:"text-sf-text",children:e.ãƒ‡ã‚¶ã‚¤ãƒ³ç¨®åˆ¥})]}),e.ãƒ‡ã‚¶ã‚¤ãƒ³å&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"åç§°:"})," ",(0,s.jsx)("span",{className:"text-sf-text",children:e.ãƒ‡ã‚¶ã‚¤ãƒ³å})]}),e.ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡&&(0,s.jsxs)("div",{className:"col-span-full",children:[(0,s.jsx)("span",{className:"text-xs text-sf-text-weak",children:"ææ¡ˆæœ‰ç„¡:"})," ",(0,s.jsx)("span",{className:"text-sf-text",children:e.ãƒ‡ã‚¶ã‚¤ãƒ³ææ¡ˆæœ‰ç„¡})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-sf-text-weak mb-1",children:"å•†è«‡å†…å®¹"}),(0,s.jsx)("p",{className:"text-sm text-sf-text whitespace-pre-wrap bg-gray-50 p-3 rounded border border-gray-100 min-h-[80px]",children:g(e.å•†è«‡å†…å®¹)||"ãªã—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-sf-text-weak mb-1",children:"æ¬¡å›ãƒ—ãƒ©ãƒ³"}),(0,s.jsx)("p",{className:"text-sm text-sf-text whitespace-pre-wrap bg-gray-50 p-3 rounded border border-gray-100",children:g(e.æ¬¡å›ãƒ—ãƒ©ãƒ³)||"ãªã—"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border border-sf-border rounded overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex text-center text-xs divide-x divide-sf-border bg-gray-50 font-medium text-sf-text-weak",children:[(0,s.jsx)("div",{className:"flex-1 py-1",children:"ä¸Šé•·"}),(0,s.jsx)("div",{className:"flex-1 py-1",children:"å±±æ¾„å¸¸å‹™"}),(0,s.jsx)("div",{className:"flex-1 py-1",children:"å²¡æœ¬å¸¸å‹™"}),(0,s.jsx)("div",{className:"flex-1 py-1",children:"ä¸­é‡æ¬¡é•·"})]}),(0,s.jsxs)("div",{className:"flex text-center text-sm divide-x divide-sf-border bg-white",children:[(0,s.jsx)("div",{className:"flex-1 py-2 h-8 flex items-center justify-center",children:e.ä¸Šé•·?(0,s.jsx)("span",{className:"text-sf-light-blue font-bold",children:"âœ“"}):(0,s.jsx)("span",{className:"text-gray-300",children:"-"})}),(0,s.jsx)("div",{className:"flex-1 py-2 h-8 flex items-center justify-center",children:e.å±±æ¾„å¸¸å‹™?(0,s.jsx)("span",{className:"text-sf-light-blue font-bold",children:"âœ“"}):(0,s.jsx)("span",{className:"text-gray-300",children:"-"})}),(0,s.jsx)("div",{className:"flex-1 py-2 h-8 flex items-center justify-center",children:e.å²¡æœ¬å¸¸å‹™?(0,s.jsx)("span",{className:"text-sf-light-blue font-bold",children:"âœ“"}):(0,s.jsx)("span",{className:"text-gray-300",children:"-"})}),(0,s.jsx)("div",{className:"flex-1 py-2 h-8 flex items-center justify-center",children:e.ä¸­é‡æ¬¡é•·?(0,s.jsx)("span",{className:"text-sf-light-blue font-bold",children:"âœ“"}):(0,s.jsx)("span",{className:"text-gray-300",children:"-"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-sf-text-weak mb-1",children:"ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ"}),(0,s.jsx)("p",{className:"text-sm text-sf-text whitespace-pre-wrap bg-blue-50 p-3 rounded border border-blue-100 min-h-[80px]",children:g(e.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ)||"ãªã—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-sf-text-weak mb-1",children:"ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„"}),(0,s.jsx)("p",{className:"text-sm text-sf-text whitespace-pre-wrap bg-green-50 p-3 rounded border border-green-100",children:g(e.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„)||"ãªã—"})]})]})]})]},t))})}),(0,s.jsxs)("div",{className:"p-2 bg-white border border-sf-border rounded text-xs text-sf-text-weak flex justify-between items-center",children:[(0,s.jsxs)("span",{children:[w.length," ä»¶ â€¢ ",a]}),(0,s.jsxs)("span",{children:["ä¸¦ã³é †: ","desc"===M?"æ–°ã—ã„é †":"å¤ã„é †"]})]}),E&&(0,s.jsx)(b,{onClose:()=>B(!1),onSuccess:()=>{B(!1),A()},selectedFile:a}),R&&P&&(0,s.jsx)(j,{report:P,onClose:()=>{O(!1),L(null)},onSuccess:()=>{O(!1),L(null),f&&A()},selectedFile:a,setReports:k,reports:w}),null!==z&&(0,s.jsx)(q,{report:w[z],onClose:()=>D(null),onNext:()=>{null!==z&&z>0&&D(z-1)},onPrev:()=>{null!==z&&z<w.length-1&&D(z+1)},hasNext:z>0,hasPrev:z<w.length-1,onEdit:()=>{L(w[z]),D(null),O(!0)},onUpdate:A})]})}e.s(["default",()=>B],45759)}]);