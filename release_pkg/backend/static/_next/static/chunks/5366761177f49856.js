(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54928,e=>{"use strict";let t;var s=e.i(75555),r=e.i(40143),i=e.i(86491),a=e.i(15823),l=e.i(93803),n=e.i(19273),o=e.i(80166),c=class extends a.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#s=(0,l.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#r=void 0;#i=void 0;#a=void 0;#l;#n;#s;#t;#o;#c;#d;#h;#u;#x;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#r.addObserver(this),d(this.#r,this.options)?this.#m():this.updateResult(),this.#f())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.#r,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.#r,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#y(),this.#r.removeObserver(this)}setOptions(e){let t=this.options,s=this.#r;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,n.resolveEnabled)(this.options.enabled,this.#r))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#g(),this.#r.setOptions(this.options),t._defaulted&&!(0,n.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#r,observer:this});let r=this.hasListeners();r&&u(this.#r,s,this.options,t)&&this.#m(),this.updateResult(),r&&(this.#r!==s||(0,n.resolveEnabled)(this.options.enabled,this.#r)!==(0,n.resolveEnabled)(t.enabled,this.#r)||(0,n.resolveStaleTime)(this.options.staleTime,this.#r)!==(0,n.resolveStaleTime)(t.staleTime,this.#r))&&this.#v();let i=this.#j();r&&(this.#r!==s||(0,n.resolveEnabled)(this.options.enabled,this.#r)!==(0,n.resolveEnabled)(t.enabled,this.#r)||i!==this.#x)&&this.#N(i)}getOptimisticResult(e){var t,s;let r=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(r,e);return t=this,s=i,(0,n.shallowEqualObjects)(t.getCurrentResult(),s)||(this.#a=i,this.#n=this.options,this.#l=this.#r.state),i}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),t?.(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#s.status||this.#s.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#r}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#m(e){this.#g();let t=this.#r.fetch(this.options,e);return e?.throwOnError||(t=t.catch(n.noop)),t}#v(){this.#b();let e=(0,n.resolveStaleTime)(this.options.staleTime,this.#r);if(n.isServer||this.#a.isStale||!(0,n.isValidTimeout)(e))return;let t=(0,n.timeUntilStale)(this.#a.dataUpdatedAt,e);this.#h=o.timeoutManager.setTimeout(()=>{this.#a.isStale||this.updateResult()},t+1)}#j(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#r):this.options.refetchInterval)??!1}#N(e){this.#y(),this.#x=e,!n.isServer&&!1!==(0,n.resolveEnabled)(this.options.enabled,this.#r)&&(0,n.isValidTimeout)(this.#x)&&0!==this.#x&&(this.#u=o.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||s.focusManager.isFocused())&&this.#m()},this.#x))}#f(){this.#v(),this.#N(this.#j())}#b(){this.#h&&(o.timeoutManager.clearTimeout(this.#h),this.#h=void 0)}#y(){this.#u&&(o.timeoutManager.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){let s,r=this.#r,a=this.options,o=this.#a,c=this.#l,h=this.#n,p=e!==r?e.state:this.#i,{state:m}=e,f={...m},b=!1;if(t._optimisticResults){let s=this.hasListeners(),l=!s&&d(e,t),n=s&&u(e,r,t,a);(l||n)&&(f={...f,...(0,i.fetchState)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:g,status:v}=f;s=f.data;let j=!1;if(void 0!==t.placeholderData&&void 0===s&&"pending"===v){let e;o?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(e=o.data,j=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,void 0!==e&&(v="success",s=(0,n.replaceData)(o?.data,e,t),b=!0)}if(t.select&&void 0!==s&&!j)if(o&&s===c?.data&&t.select===this.#o)s=this.#c;else try{this.#o=t.select,s=t.select(s),s=(0,n.replaceData)(o?.data,s,t),this.#c=s,this.#t=null}catch(e){this.#t=e}this.#t&&(y=this.#t,s=this.#c,g=Date.now(),v="error");let N="fetching"===f.fetchStatus,w="pending"===v,R="error"===v,S=w&&N,k=void 0!==s,C={status:v,fetchStatus:f.fetchStatus,isPending:w,isSuccess:"success"===v,isError:R,isInitialLoading:S,isLoading:S,data:s,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>p.dataUpdateCount||f.errorUpdateCount>p.errorUpdateCount,isFetching:N,isRefetching:N&&!w,isLoadingError:R&&!k,isPaused:"paused"===f.fetchStatus,isPlaceholderData:b,isRefetchError:R&&k,isStale:x(e,t),refetch:this.refetch,promise:this.#s,isEnabled:!1!==(0,n.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===C.status?e.reject(C.error):void 0!==C.data&&e.resolve(C.data)},s=()=>{t(this.#s=C.promise=(0,l.pendingThenable)())},i=this.#s;switch(i.status){case"pending":e.queryHash===r.queryHash&&t(i);break;case"fulfilled":("error"===C.status||C.data!==i.value)&&s();break;case"rejected":("error"!==C.status||C.error!==i.reason)&&s()}}return C}updateResult(){let e=this.#a,t=this.createResult(this.#r,this.options);if(this.#l=this.#r.state,this.#n=this.options,void 0!==this.#l.data&&(this.#d=this.#r),(0,n.shallowEqualObjects)(t,e))return;this.#a=t;let s=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.#p.size)return!0;let r=new Set(s??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#a).some(t=>this.#a[t]!==e[t]&&r.has(t))};this.#w({listeners:s()})}#g(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#r)return;let t=this.#r;this.#r=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#f()}#w(e){r.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#r,type:"observerResultsUpdated"})})}};function d(e,t){return!1!==(0,n.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&h(e,t,t.refetchOnMount)}function h(e,t,s){if(!1!==(0,n.resolveEnabled)(t.enabled,e)&&"static"!==(0,n.resolveStaleTime)(t.staleTime,e)){let r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&x(e,t)}return!1}function u(e,t,s,r){return(e!==t||!1===(0,n.resolveEnabled)(r.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&x(e,s)}function x(e,t){return!1!==(0,n.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,n.resolveStaleTime)(t.staleTime,e))}e.i(47167);var p=e.i(71645),m=e.i(12598);e.i(43476);var f=p.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),b=p.createContext(!1);b.Provider;var y=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function g(e,t){return function(e,t,s){let i=p.useContext(b),a=p.useContext(f),l=(0,m.useQueryClient)(s),o=l.defaultQueryOptions(e);if(l.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",o.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=o.staleTime;o.staleTime="function"==typeof t?(...s)=>e(t(...s)):e(t),"number"==typeof o.gcTime&&(o.gcTime=Math.max(o.gcTime,1e3))}(o.suspense||o.throwOnError||o.experimental_prefetchInRender)&&!a.isReset()&&(o.retryOnMount=!1),p.useEffect(()=>{a.clearReset()},[a]);let c=!l.getQueryCache().get(o.queryHash),[d]=p.useState(()=>new t(l,o)),h=d.getOptimisticResult(o),u=!i&&!1!==e.subscribed;if(p.useSyncExternalStore(p.useCallback(e=>{let t=u?d.subscribe(r.notifyManager.batchCalls(e)):n.noop;return d.updateResult(),t},[d,u]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),p.useEffect(()=>{d.setOptions(o)},[o,d]),o?.suspense&&h.isPending)throw y(o,d,a);if((({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&void 0===e.data||(0,n.shouldThrowError)(s,[e.error,r])))({result:h,errorResetBoundary:a,throwOnError:o.throwOnError,query:l.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if(l.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!n.isServer&&h.isLoading&&h.isFetching&&!i){let e=c?y(o,d,a):l.getQueryCache().get(o.queryHash)?.promise;e?.catch(n.noop).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?h:d.trackResult(h)}(e,c,t)}e.i(14272),a.Subscribable,e.i(78138);var v=e.i(9165);e.i(5766);let j={reports:e=>["reports",e],files:["files"],customers:e=>["customers",e],sales:["sales"]};function N(e){return g({queryKey:j.reports(e),queryFn:()=>(0,v.getReports)(e),enabled:!!e})}function w(){return g({queryKey:j.files,queryFn:v.getFiles})}function R(e){return g({queryKey:j.customers(e),queryFn:()=>(0,v.getCustomers)(e),enabled:!!e})}function S(){return g({queryKey:j.sales,queryFn:v.getAllSales})}e.s(["queryKeys",0,j,"useCustomers",()=>R,"useFiles",()=>w,"useReports",()=>N,"useSales",()=>S],54928)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},45423,e=>{"use strict";let t=(0,e.i(75254).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);e.s(["Bell",()=>t],45423)},73708,e=>{"use strict";let t=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],73708)},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(9165),i=e.i(78138),a=e.i(54928),l=e.i(12598),n=e.i(78583),o=e.i(87316),c=e.i(61911),d=e.i(43432),h=e.i(25652),u=e.i(70273),x=e.i(75254);let p=(0,x.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var m=e.i(73708),f=e.i(45423),b=e.i(37727);let y=(0,x.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),g=(0,x.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var v=e.i(22016),j=e.i(5766),N=e.i(9694),w=e.i(75225),R=e.i(85183),S=e.i(93230),k=e.i(72526),C=e.i(34239),Q=e.i(59559),I=e.i(31195);function T(){let{selectedFile:e}=(0,i.useFile)(),x=(0,l.useQueryClient)(),{data:T=[],isLoading:O,error:F}=(0,a.useReports)(e||void 0),M=(0,s.useMemo)(()=>[...T].sort((e,t)=>{let s=String(e.æ—¥ä»˜||"");return String(t.æ—¥ä»˜||"").localeCompare(s)}),[T]),[D,q]=(0,s.useState)(null),[z,U]=(0,s.useState)([]),[K,P]=(0,s.useState)(""),[A,_]=(0,s.useState)(null),[B,L]=(0,s.useState)(""),[V,W]=(0,s.useState)(!1),[$,H]=(0,s.useState)(!1),[X,Y]=(0,s.useState)(new Set);(0,s.useEffect)(()=>{e&&(0,r.getDesignImages)(e).then(e=>{U(e.images||[]),P(e.folder||"")})},[e]);let G=async t=>{if(!B.trim())return;let s=B.trim();_(null),L(""),Y(e=>new Set(e).add(t.ç®¡ç†ç•ªå·));try{await (0,r.updateReportReply)(t.ç®¡ç†ç•ªå·,s,e),await x.invalidateQueries({queryKey:a.queryKeys.reports(e||void 0)}),j.default.success("è¿”ä¿¡ã‚’é€ä¿¡ã—ã¾ã—ãŸ")}catch(e){console.error("Failed to submit reply:",e),j.default.error("è¿”ä¿¡ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{Y(e=>{let s=new Set(e);return s.delete(t.ç®¡ç†ç•ªå·),s})}},J=async t=>{Y(e=>new Set(e).add(t.ç®¡ç†ç•ªå·));try{await (0,r.updateReportReply)(t.ç®¡ç†ç•ªå·,"ç¢ºèªæ¸ˆã¿",e),await x.invalidateQueries({queryKey:a.queryKeys.reports(e||void 0)}),j.default.success("æ—¢èª­ã«ã—ã¾ã—ãŸ")}catch(e){console.error("Failed to dismiss notification:",e),j.default.error("æ—¢èª­å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{Y(e=>{let s=new Set(e);return s.delete(t.ç®¡ç†ç•ªå·),s})}},Z=M.filter(e=>{let t=e.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ||e.ã‚³ãƒ¡ãƒ³ãƒˆ,s=t?String(t).trim():"",r=e.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„?String(e.ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡æ¬„).trim():"",i=e.æ—¢èª­ãƒã‚§ãƒƒã‚¯?String(e.æ—¢èª­ãƒã‚§ãƒƒã‚¯).trim():"";return""!==s&&""===r&&""===i}),ee=M.length,et=new Date,es=String(et.getFullYear()).slice(-2),er=String(et.getMonth()+1).padStart(2,"0"),ei=`${es}/${er}`,ea=M.filter(e=>e.æ—¥ä»˜&&String(e.æ—¥ä»˜).startsWith(ei)).length,el=M.filter(e=>e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("è¨ªå•")).length,en=M.filter(e=>e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("é›»è©±")).length,eo=M.filter(e=>e.é‡ç‚¹é¡§å®¢&&"-"!==e.é‡ç‚¹é¡§å®¢&&""!==e.é‡ç‚¹é¡§å®¢),ec=eo.filter(e=>e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("è¨ªå•")).length,ed=eo.filter(e=>e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("é›»è©±")).length,eh=new Set(eo.filter(e=>e.å¾—æ„å…ˆCD).map(e=>e.å¾—æ„å…ˆCD)).size,eu=new Map;M.forEach(e=>{if(!e.æ—¥ä»˜)return;let t="",s=String(e.æ—¥ä»˜);if(s.includes("/")){let e=s.split("/");e.length>=2&&(t=`${e[0]}/${e[1]}`)}else t=s.slice(0,7);eu.has(t)||eu.set(t,{month:t,visits:0,calls:0,priorityVisits:0,priorityCalls:0});let r=eu.get(t),i=e.é‡ç‚¹é¡§å®¢&&"-"!==e.é‡ç‚¹é¡§å®¢&&""!==e.é‡ç‚¹é¡§å®¢;e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("è¨ªå•")&&(r.visits++,i&&r.priorityVisits++),e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("é›»è©±")&&(r.calls++,i&&r.priorityCalls++)});let ex=Array.from(eu.values()).sort((e,t)=>t.month.localeCompare(e.month)),ep=[...ex].reverse(),em=new Map;M.forEach(e=>{let t=e.è¨ªå•å…ˆå||"åç§°ä¸æ˜Ž";em.has(t)||em.set(t,{name:t,visits:0,calls:0,total:0});let s=em.get(t),r=!1;e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("è¨ªå•")&&(s.visits++,r=!0),e.è¡Œå‹•å†…å®¹&&e.è¡Œå‹•å†…å®¹.includes("é›»è©±")&&(s.calls++,r=!0),r&&(s.total=s.visits+s.calls)});let ef=Array.from(em.values()).filter(e=>e.total>0).sort((e,t)=>t.total-e.total).slice(0,10);return(0,t.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-2xl font-semibold text-sf-text",children:"ãƒ›ãƒ¼ãƒ "})}),Z.length>0&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 animate-pulse-slow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(f.Bell,{className:"text-red-500 fill-red-500",size:24}),(0,t.jsxs)("h2",{className:"text-lg font-bold text-red-700",children:["æ–°ç€ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ (",Z.length,"ä»¶)"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:($?Z:Z.slice(0,3)).map(e=>(0,t.jsxs)("div",{className:"bg-white p-3 rounded border border-red-100 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1 cursor-pointer hover:bg-red-50/50 transition-colors rounded p-1 -m-1",onClick:()=>q(e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-bold text-red-600",children:e.æ—¥ä»˜}),(0,t.jsx)("span",{className:"text-sf-text font-medium",children:e.è¨ªå•å…ˆå||"è¨ªå•å…ˆãªã—"}),(0,t.jsxs)("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded text-gray-500",children:["No.",e.ç®¡ç†ç•ªå·]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:[(0,t.jsx)("span",{className:"font-bold mr-1",children:"ä¸Šé•·:"}),e.ä¸Šé•·ã‚³ãƒ¡ãƒ³ãƒˆ||e.ã‚³ãƒ¡ãƒ³ãƒˆ]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 ml-4 flex-shrink-0",children:A!==e.ç®¡ç†ç•ªå·&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),_(e.ç®¡ç†ç•ªå·),L("")},disabled:X.has(e.ç®¡ç†ç•ªå·),className:"text-xs bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold hover:bg-red-200 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(y,{size:12}),"è¿”ä¿¡"]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),J(e)},disabled:X.has(e.ç®¡ç†ç•ªå·),className:"text-xs bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold hover:bg-green-200 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:X.has(e.ç®¡ç†ç•ªå·)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),"å‡¦ç†ä¸­"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{size:12}),"æ—¢èª­"]})})]})})]}),A===e.ç®¡ç†ç•ªå·&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.å•†è«‡å†…å®¹&&(0,t.jsxs)("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[(0,t.jsx)("div",{className:"font-bold text-blue-700 mb-1",children:"ðŸ“ å•†è«‡å†…å®¹:"}),(0,t.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap",children:e.å•†è«‡å†…å®¹})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:B,onChange:e=>L(e.target.value),onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),G(e))},placeholder:"è¿”ä¿¡ã‚’å…¥åŠ›...",autoFocus:!0,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-300"}),(0,t.jsx)("button",{onClick:()=>G(e),disabled:X.has(e.ç®¡ç†ç•ªå·)||!B.trim(),className:"px-4 py-2 bg-red-500 text-white text-sm rounded font-bold hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:X.has(e.ç®¡ç†ç•ªå·)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"inline-block w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"é€ä¿¡ä¸­"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{size:14}),"é€ä¿¡"]})}),(0,t.jsx)("button",{onClick:()=>{_(null),L("")},className:"px-3 py-2 bg-gray-200 text-gray-600 text-sm rounded hover:bg-gray-300",children:(0,t.jsx)(b.X,{size:14})})]})]})]},e.ç®¡ç†ç•ªå·))}),Z.length>3&&(0,t.jsx)("button",{onClick:()=>H(!$),className:"mt-3 w-full py-2 text-sm text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors font-medium",children:$?"â–² æŠ˜ã‚ŠãŸãŸã‚€":`â–¼ æ®‹ã‚Š${Z.length-3}ä»¶ã‚’è¡¨ç¤º`})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(E,{title:"ç·æ—¥å ±æ•°",value:ee,icon:(0,t.jsx)(n.FileText,{className:"text-sf-light-blue"})}),(0,t.jsx)(E,{title:"ä»Šæœˆã®æ—¥å ±",value:ea,icon:(0,t.jsx)(o.Calendar,{className:"text-green-600"})}),(0,t.jsx)(E,{title:"ç´¯è¨ˆè¨ªå•ä»¶æ•°",value:el,icon:(0,t.jsx)(c.Users,{className:"text-purple-600"})}),(0,t.jsx)(E,{title:"ç´¯è¨ˆé›»è©±ä»¶æ•°",value:en,icon:(0,t.jsx)(d.Phone,{className:"text-orange-500"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white rounded border border-sf-border shadow-sm p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(h.TrendingUp,{className:"text-sf-light-blue",size:20}),(0,t.jsx)("h2",{className:"font-semibold text-lg text-sf-text",children:"æ´»å‹•æŽ¨ç§» (æœˆåˆ¥)"})]}),(0,t.jsx)("div",{style:{width:"100%",height:300},children:(0,t.jsx)(I.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(N.BarChart,{data:ep,children:[(0,t.jsx)(k.CartesianGrid,{strokeDasharray:"3 3",vertical:!1}),(0,t.jsx)(R.XAxis,{dataKey:"month",tick:{fontSize:12}}),(0,t.jsx)(S.YAxis,{tick:{fontSize:12}}),(0,t.jsx)(C.Tooltip,{contentStyle:{backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #ddd"},itemStyle:{fontSize:"12px"}}),(0,t.jsx)(Q.Legend,{wrapperStyle:{fontSize:"12px"}}),(0,t.jsx)(w.Bar,{dataKey:"visits",name:"è¨ªå•",fill:"#8884d8",radius:[4,4,0,0]}),(0,t.jsx)(w.Bar,{dataKey:"calls",name:"é›»è©±",fill:"#82ca9d",radius:[4,4,0,0]})]})})})]}),(0,t.jsxs)("div",{className:"bg-white rounded border border-sf-border shadow-sm p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(u.Star,{className:"text-yellow-500",size:20}),(0,t.jsx)("h2",{className:"font-semibold text-lg text-sf-text",children:"é‡ç‚¹é¡§å®¢çŠ¶æ³"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"text-sm text-sf-text-weak",children:"å¯¾è±¡é¡§å®¢æ•°"}),(0,t.jsx)("span",{className:"text-xl font-bold text-sf-text",children:eh})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"text-sm text-sf-text-weak",children:"è¨ªå•ä»¶æ•°"}),(0,t.jsx)("span",{className:"text-xl font-bold text-purple-600",children:ec})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"text-sm text-sf-text-weak",children:"é›»è©±ä»¶æ•°"}),(0,t.jsx)("span",{className:"text-xl font-bold text-orange-600",children:ed})]}),(0,t.jsxs)("div",{className:"pt-2 border-t border-sf-border",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-sf-text-weak mb-1",children:[(0,t.jsx)("span",{children:"æ´»å‹•ã‚«ãƒãƒ¼çŽ‡"}),(0,t.jsxs)("span",{children:[el+en>0?Math.round((ec+ed)/(el+en)*100):0,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${el+en>0?Math.min(100,(ec+ed)/(el+en)*100):0}%`}})})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded border border-sf-border shadow-sm p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(p,{className:"text-sf-light-blue",size:20}),(0,t.jsx)("h2",{className:"font-semibold text-lg text-sf-text",children:"å¾—æ„å…ˆåˆ¥ æ´»å‹•ãƒ©ãƒ³ã‚­ãƒ³ã‚° (Top 10)"})]}),(0,t.jsx)("div",{style:{width:"100%",height:400},children:(0,t.jsx)(I.ResponsiveContainer,{width:"100%",height:400,children:(0,t.jsxs)(N.BarChart,{layout:"vertical",data:ef,margin:{top:5,right:30,left:40,bottom:5},children:[(0,t.jsx)(k.CartesianGrid,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),(0,t.jsx)(R.XAxis,{type:"number",tick:{fontSize:12}}),(0,t.jsx)(S.YAxis,{dataKey:"name",type:"category",width:150,tick:{fontSize:11},interval:0}),(0,t.jsx)(C.Tooltip,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #ddd"},itemStyle:{fontSize:"12px"}}),(0,t.jsx)(Q.Legend,{wrapperStyle:{fontSize:"12px"}}),(0,t.jsx)(w.Bar,{dataKey:"visits",name:"è¨ªå•",fill:"#8884d8",radius:[0,4,4,0],stackId:"a"}),(0,t.jsx)(w.Bar,{dataKey:"calls",name:"é›»è©±",fill:"#82ca9d",radius:[0,4,4,0],stackId:"a"})]})})})]}),(0,t.jsxs)("div",{className:"bg-white rounded border border-sf-border shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-sf-border bg-gray-50 flex items-center gap-2",children:[(0,t.jsx)(p,{size:20,className:"text-sf-light-blue"}),(0,t.jsx)("h2",{className:"font-semibold text-sm text-sf-text",children:"æœˆåˆ¥æ´»å‹•çµ±è¨ˆ"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)("thead",{className:"text-xs text-sf-text-weak bg-gray-50 border-b border-sf-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"æœˆ"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"è¨ªå•ä»¶æ•°"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"é›»è©±ä»¶æ•°"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"åˆè¨ˆ"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center border-l-2 border-yellow-200 bg-yellow-50",children:"é‡ç‚¹é¡§å®¢è¨ªå•"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center bg-yellow-50",children:"é‡ç‚¹é¡§å®¢é›»è©±"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center bg-yellow-50",children:"é‡ç‚¹é¡§å®¢åˆè¨ˆ"})]})}),(0,t.jsx)("tbody",{children:ex.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-sf-border hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 font-medium text-sf-text",children:e.month}),(0,t.jsx)("td",{className:"px-4 py-3 text-center text-sf-text",children:e.visits}),(0,t.jsx)("td",{className:"px-4 py-3 text-center text-sf-text",children:e.calls}),(0,t.jsx)("td",{className:"px-4 py-3 text-center font-semibold text-sf-text",children:e.visits+e.calls}),(0,t.jsx)("td",{className:"px-4 py-3 text-center text-purple-600 border-l-2 border-yellow-200 bg-yellow-50",children:e.priorityVisits}),(0,t.jsx)("td",{className:"px-4 py-3 text-center text-orange-600 bg-yellow-50",children:e.priorityCalls}),(0,t.jsx)("td",{className:"px-4 py-3 text-center font-semibold text-yellow-700 bg-yellow-50",children:e.priorityVisits+e.priorityCalls})]},e.month))})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded border border-sf-border shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-sf-border bg-gray-50 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"font-semibold text-sm text-sf-text",children:"æœ€è¿‘ã®æ—¥å ±"}),(0,t.jsx)("a",{href:"/reports",className:"text-sm text-sf-light-blue hover:underline",children:"ã™ã¹ã¦è¡¨ç¤º"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)("thead",{className:"text-xs text-sf-text-weak bg-gray-50 border-b border-sf-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"æ—¥ä»˜"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"è¨ªå•å…ˆ"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"è¡Œå‹•å†…å®¹"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"é‡ç‚¹"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"é¢è«‡è€…"})]})}),(0,t.jsx)("tbody",{children:O?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-4 py-4 text-center text-sf-text-weak",children:"èª­ã¿è¾¼ã¿ä¸­..."})}):0===M.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-4 py-4 text-center text-sf-text-weak",children:"æ—¥å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"})}):M.slice(0,10).map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-sf-border hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sf-text",children:e.æ—¥ä»˜}),(0,t.jsx)("td",{className:"px-4 py-3 font-medium text-sf-light-blue",children:e.å¾—æ„å…ˆCD?(0,t.jsx)(v.default,{href:`/customers/${e.å¾—æ„å…ˆCD}`,className:"hover:underline",children:e.è¨ªå•å…ˆå}):e.è¨ªå•å…ˆå}),(0,t.jsx)("td",{className:"px-4 py-3 text-sf-text",children:e.è¡Œå‹•å†…å®¹}),(0,t.jsx)("td",{className:"px-4 py-3 text-center",children:e.é‡ç‚¹é¡§å®¢&&"-"!==e.é‡ç‚¹é¡§å®¢&&""!==e.é‡ç‚¹é¡§å®¢&&(0,t.jsx)(u.Star,{size:16,className:"text-yellow-500 inline"})}),(0,t.jsx)("td",{className:"px-4 py-3 text-sf-text",children:e.é¢è«‡è€…})]},s))})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded border border-sf-border shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-sf-border bg-gray-50 flex items-center gap-2",children:[(0,t.jsx)(m.Image,{size:20,className:"text-pink-500"}),(0,t.jsxs)("h2",{className:"font-semibold text-sm text-sf-text",children:["ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ (",K||"ãƒ•ã‚©ãƒ«ãƒ€æ¤œç´¢ä¸­...",")"]})]}),(0,t.jsx)("div",{className:"p-4",children:z.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:z.map((e,s)=>(0,t.jsx)("div",{className:"group relative aspect-square bg-gray-100 rounded overflow-hidden border border-gray-200",children:(0,t.jsxs)("a",{href:(0,r.getImageUrl)(e.path),target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)("img",{src:(0,r.getImageUrl)(e.path),alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:e.name})]})},s))}):(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:K?"ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ":"é–¢é€£ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"})})]})]})}function E({title:e,value:s,icon:r}){return(0,t.jsxs)("div",{className:"bg-white p-4 rounded border border-sf-border shadow-sm flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-sf-text-weak mb-1",children:e}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-sf-text",children:s})]}),(0,t.jsx)("div",{className:"p-2 bg-gray-50 rounded-full border border-gray-200",children:r})]})}e.s(["default",()=>T],52683)}]);