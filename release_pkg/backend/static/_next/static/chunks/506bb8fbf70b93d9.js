(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},84614,e=>{"use strict";let s=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],84614)},96743,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(9165),l=e.i(55436),a=e.i(84614),d=e.i(7486),i=e.i(78894),c=e.i(22016);function n(){let[e,n]=(0,t.useState)([]),[o,x]=(0,t.useState)(!0),[m,h]=(0,t.useState)(""),[f,u]=(0,t.useState)([]);return(0,t.useEffect)(()=>{(0,r.getReports)().then(e=>{let s=e.filter(e=>e.行動内容&&String(e.行動内容).includes("クレーム")||e.商談内容&&String(e.商談内容).includes("クレーム"));s.sort((e,s)=>{let t=String(e.日付||"");return String(s.日付||"").localeCompare(t)}),n(s),u(s),x(!1)}).catch(e=>{console.error(e),x(!1)})},[]),(0,t.useEffect)(()=>{if(""===m.trim())return void u(e);let s=m.toLowerCase();u(e.filter(e=>String(e.得意先CD||"").toLowerCase().includes(s)||String(e.訪問先名||"").toLowerCase().includes(s)||String(e.商談内容||"").toLowerCase().includes(s)||String(e.面談者||"").toLowerCase().includes(s)))},[m,e]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)("h1",{className:"text-2xl font-semibold text-sf-text",children:"クレーム対応履歴"})}),(0,s.jsx)("div",{className:"bg-white rounded border border-sf-border shadow-sm p-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"得意先、商談内容、面談者で検索...",value:m,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-sf-border rounded focus:outline-none focus:ring-2 focus:ring-sf-light-blue focus:border-transparent"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded border border-sf-border shadow-sm",children:[(0,s.jsx)("p",{className:"text-sm text-sf-text-weak mb-1",children:"総クレーム件数"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-sf-text",children:e.length})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded border border-sf-border shadow-sm",children:[(0,s.jsx)("p",{className:"text-sm text-sf-text-weak mb-1",children:"検索結果"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-sf-light-blue",children:f.length})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded border border-sf-border shadow-sm",children:[(0,s.jsx)("p",{className:"text-sm text-sf-text-weak mb-1",children:"対象顧客数"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-orange-600",children:new Set(f.filter(e=>e.得意先CD).map(e=>e.得意先CD)).size})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded border border-sf-border shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"px-4 py-3 border-b border-sf-border bg-gray-50",children:(0,s.jsx)("h2",{className:"font-semibold text-sm text-sf-text",children:"クレーム対応タイムライン"})}),o?(0,s.jsx)("div",{className:"p-8 text-center text-sf-text-weak",children:"読み込み中..."}):0===f.length?(0,s.jsx)("div",{className:"p-8 text-center text-sf-text-weak",children:m?"検索結果が見つかりません":"クレーム対応履歴が見つかりません"}):(0,s.jsx)("div",{className:"p-4 space-y-4",children:f.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white p-4 rounded border border-sf-border shadow-sm hover:shadow-md transition-shadow relative pl-12",children:[(0,s.jsxs)("div",{className:"absolute left-4 top-4 flex flex-col items-center h-full",children:[(0,s.jsx)("div",{className:"bg-orange-100 p-1.5 rounded-full border border-orange-200 z-10",children:(0,s.jsx)(i.AlertTriangle,{size:16,className:"text-orange-600"})}),t!==f.length-1&&(0,s.jsx)("div",{className:"w-px bg-gray-200 h-full absolute top-8"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-semibold text-sf-text",children:e.日付}),(0,s.jsx)("span",{className:"text-sm text-orange-700 bg-orange-100 px-2 py-0.5 rounded font-medium",children:e.行動内容||"-"})]}),e.面談者&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-sf-text-weak",children:[(0,s.jsx)(a.User,{size:14,className:"mr-1"}),e.面談者]})]}),(0,s.jsx)("div",{className:"mb-3",children:e.得意先CD?(0,s.jsxs)(c.default,{href:`/customers/${e.得意先CD}`,className:"flex items-center gap-2 text-sf-light-blue hover:underline font-medium",children:[(0,s.jsx)(d.Building2,{size:16}),e.訪問先名," (",e.得意先CD,")"]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sf-text font-medium",children:[(0,s.jsx)(d.Building2,{size:16}),e.訪問先名]})}),e.商談内容&&(0,s.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded p-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-orange-800 mb-1",children:"対応内容"}),(0,s.jsx)("p",{className:"text-sm text-sf-text whitespace-pre-wrap",children:e.商談内容})]}),e.次回プラン&&(0,s.jsxs)("div",{className:"mt-3 text-sm text-sf-text-weak",children:[(0,s.jsx)("span",{className:"font-medium",children:"次回プラン: "}),(0,s.jsx)("span",{className:"text-sf-text",children:e.次回プラン})]})]},t))})]})]})}e.s(["default",()=>n])}]);